 -- ALTER SESSION SET "_ORACLE_SCRIPT"=TRUE;  
 -- create user EJTIENDA identified by EJTIENDA;
 -- GRANT CONNECT, RESOURCE, DBA TO EJTIENDA;


CREATE TABLE CLIENTES(
    ID_CLIENTE VARCHAR2(10) NOT NULL,
    NOMBRE VARCHAR2(25),
    APELLIDOS VARCHAR2(25),
    CORREO VARCHAR2(30),
    TELEFONO NUMBER(10),
    FECHA_REGISTRO DATE,
    CONSTRAINT PK_CLIENTES PRIMARY KEY (ID_CLIENTE)
);

CREATE TABLE PEDIDO(
    ID_PEDIDO VARCHAR(30) NOT NULL,
    FECHA_REALIZACION DATE,
    ESTADO VARCHAR2(25),
    PRECIO_UNITARIO NUMBER(10,2),
    CANTIDAD_SOLICITADA NUMBER(10),
    ID_CLIENTE VARCHAR2(10),
    CONSTRAINT PK_PEDIDO PRIMARY KEY (ID_PEDIDO),
    CONSTRAINT FK_PEDIDO FOREIGN KEY(ID_CLIENTE) REFERENCES CLIENTES (ID_CLIENTE)
);
CREATE TABLE PRODUCTO(
    ID_PRODUCTO NUMBER(10) NOT NULL,
    NOMBRE VARCHAR2(25),
    PRECIO NUMBER(10,2),
    STOCK NUMBER(10),
    CATEGORIA VARCHAR2(10),
    ID_PEDIDO VARCHAR2(30) NOT NULL,
    ID_CLIENTE VARCHAR2(10) NOT NULL,
    CONSTRAINT PK_PRODUCTO PRIMARY KEY (ID_PRODUCTO),
    CONSTRAINT FK1_PRODUCTO FOREIGN KEY(ID_PEDIDO) REFERENCES PEDIDO (ID_PEDIDO),
    CONSTRAINT FK2_PRODUCTO FOREIGN KEY(ID_CLIENTE) REFERENCES CLIENTES (ID_CLIENTE)
);

CREATE TABLE ENVIO(
    ID_ENVIO VARCHAR2(30) NOT NULL,
    DIRECCION VARCHAR2(100),
    CIUDAD VARCHAR2(25),
    CODIGO_POSTAL NUMBER (10),
    FECHA_ENVIO DATE,
    FECHA_ENTREGA DATE,
    ID_PEDIDO VARCHAR2(30) NOT NULL,
    CONSTRAINT PK_ENVIO PRIMARY KEY (ID_ENVIO),
    CONSTRAINT FK_ENVIO FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDO (ID_PEDIDO)
);

CREATE TABLE PAGOS(
    ID_PAGO VARCHAR2(10) NOT NULL,
    FECHA_PAGO DATE,
    IMPORTE_PAGO NUMBER(10,2),
    METODO_PAGO VARCHAR2(25),
    ID_ENVIO VARCHAR2(30) NOT NULL,
    CONSTRAINT PK_PAGOS PRIMARY KEY (ID_PAGO),
    CONSTRAINT FK_PAGOS FOREIGN KEY (ID_ENVIO) REFERENCES ENVIO (ID_ENVIO)
);

INSERT INTO CLIENTES VALUES('0012345600', 'PABLO', 'GÓMEZ LÓPEZ', 'PBGOLO@GMAIL.COM',671886903, TO_DATE('29/07/2022','DD/MM/YYYY'));
INSERT INTO CLIENTES VALUES('0012345601', 'DANIEL', 'MORÓN MÁRQUEZ', 'DANIELMM@GMAIL.COM',623653578, TO_DATE('09/12/2023','DD/MM/YYYY'));
INSERT INTO CLIENTES VALUES('0012345602', 'LEIRE', 'FERNANDEZ ORTIZ', 'LEIREFO@GMAIL.COM',665322137, TO_DATE('07/04/2025','DD/MM/YYYY'));

INSERT INTO PEDIDO VALUES ('00000000ABC123DEG00',TO_DATE('03/08/2022','DD/MM/YYYY'), 'PENDIENTE DE ENVÍO', 5.99,3,'0012345600');
INSERT INTO PEDIDO VALUES ('00000000ABC123DEG01',TO_DATE('14/12/2023','DD/MM/YYYY'), 'PENDIENTE DE ENVÍO', 11.99,2,'0012345601');
INSERT INTO PEDIDO VALUES ('00000000ABC123DEG02',TO_DATE('20/04/2025','DD/MM/YYYY'), 'PENDIENTE DE ENVÍO', 14.99,1,'0012345602');

INSERT INTO PRODUCTO VALUES('10000', 'CAMISETA',5.99,100,'INVIERNO', '00000000ABC123DEG00','0012345600');
INSERT INTO PRODUCTO VALUES('10001', 'SUDADERA',11.99,80,'INVIERNO', '00000000ABC123DEG01','0012345601');
INSERT INTO PRODUCTO VALUES('10002', 'CHAQUETA',14.99,40,'PRIMAVERA', '00000000ABC123DEG02','0012345602');

INSERT INTO ENVIO VALUES('0000','C/GRANADA, BRENES','SEVILLA',41310,TO_DATE('04/08/2022','DD/MM/YYYY'),TO_DATE('05/08/2020','DD/MM/YYYY'), '00000000ABC123DEG00');
INSERT INTO ENVIO VALUES('0001','C/CÁDIZ, LORA DEL RIO','SEVILLA',41440,TO_DATE('15/12/2023','DD/MM/YYYY'),TO_DATE('17/12/2023','DD/MM/YYYY'), '00000000ABC123DEG01');
INSERT INTO ENVIO VALUES('0002','C/AMOR, LA RINCONADA','SEVILLA',41309,TO_DATE('21/04/2025','DD/MM/YYYY'),TO_DATE('22/04/2025','DD/MM/YYYY'), '00000000ABC123DEG02');

INSERT INTO PAGOS VALUES('1077',TO_DATE('29/07/2022','DD/MM/YYYY'),19.99,'BIZUM','0000');
INSERT INTO PAGOS VALUES('1076',TO_DATE('09/12/2023','DD/MM/YYYY'),23.99,'TARJETA','0001');
INSERT INTO PAGOS VALUES('1075',TO_DATE('07/04/2025','DD/MM/YYYY'),16.99,'BIZUM','0002');

SELECT * FROM CLIENTES;
SELECT * FROM PEDIDO;
SELECT * FROM PRODUCTO;
SELECT * FROM ENVIO;
SELECT * FROM PAGOS;


