-- Insert y restricciones de sql

-- Restricciones con ALTER

ALTER TABLE PEDIDO ADD CONSTRAINT FK_PEDIDO FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTES (ID_CLIENTE) ON DELETE CASCADE;

ALTER TABLE PRODUCTO ADD CONSTRAINT CHK_PRODUCTO CHECK (PRECIO > 0);

ALTER TABLE ENVIO ADD CONSTRAINT CHK1_ENVIO CHECK (CODIGO_POSTAL BETWEEN 10000 AND 99999);

ALTER TABLE PRODUCTO ADD CONSTRAINT UNIQUE_PRODUCTO UNIQUE (NOMBRE);

ALTER TABLE PEDIDO ADD CONSTRAINT CHK1_PEDIDO CHECK (ESTADO IN ('PENDIENTE','PAGADO','ENVIADO','ENTREGADO','CANCELADO'));


-- TABLA CLIENTES
INSERT INTO CLIENTES (ID_CLIENTE, NOMBRE, APELLIDOS, CORREO, TELEFONO, FECHA_REGISTRO)
	VALUES('0015356789', 'RODOLFO', 'GÓMEZ CAZÓN', 'ROGOCA@OUTLOOK.COM',659321099, TO_DATE('13/01/2020','DD/MM/YYYY'));
INSERT INTO CLIENTES (ID_CLIENTE, NOMBRE, APELLIDOS, CORREO, TELEFONO, FECHA_REGISTRO)
	VALUES('0015356788', 'ALVARO', 'CRUCES MARTINEZ', 'ALVAROCM@YAHOO.ES',622693538, TO_DATE('03/11/2022','DD/MM/YYYY'));
INSERT INTO CLIENTES (ID_CLIENTE, NOMBRE, APELLIDOS, CORREO, TELEFONO, FECHA_REGISTRO)
	VALUES('0015356787', 'LUCIA', 'FERNANDEZ ROMAN', 'LUCIAFR@HOTMAIL.COM',623392837, TO_DATE('01/01/2024','DD/MM/YYYY'));
INSERT INTO CLIENTES (ID_CLIENTE, NOMBRE, APELLIDOS, CORREO, TELEFONO, FECHA_REGISTRO)
	VALUES ('0000369712', 'MARGARITA', 'SÁNCHEZ LAS VIÑAS', 'MARGA.VIÑAS@GMAIL.COM', 633486759, TO_DATE('2025-01-15', 'YYYY-MM-DD'));

-- TABLA PEDIDO
INSERT INTO PEDIDO (ID_PEDIDO, FECHA_REALIZACION, ESTADO, PRECIO_UNITARIO, CANTIDAD_SOLICITADA, ID_CLIENTE)
	VALUES ('00000000JSKL586DG6E93',TO_DATE('14/02/2020','DD/MM/YYYY'), 'ENTREGADO', 6.99,2,'0015356789');
INSERT INTO PEDIDO (ID_PEDIDO, FECHA_REALIZACION, ESTADO, PRECIO_UNITARIO, CANTIDAD_SOLICITADA, ID_CLIENTE)
	VALUES ('00000000JSKL586DG6E92',TO_DATE('15/01/2026','DD/MM/YYYY'), 'EN TRÁNSITO', 9.99,7,'0015356788');
INSERT INTO PEDIDO (ID_PEDIDO, FECHA_REALIZACION, ESTADO, PRECIO_UNITARIO, CANTIDAD_SOLICITADA, ID_CLIENTE)
	VALUES ('00000000JSKL586DG6E91',TO_DATE('20/02/2024','DD/MM/YYYY'), 'CANCELADO', 19.99,1,'0015356787');

-- TABLA PRODUCTO
INSERT INTO PRODUCTO (ID_PRODUCTO, NOMBRE, PRECIO, STOCK, CATEGORIA, ID_PEDIDO, ID_CLIENTE)
	VALUES('10103', 'CAMISETA',6.99,30,'INVIERNO', '00000000JSKL586DG6E93','0015356789');
INSERT INTO PRODUCTO (ID_PRODUCTO, NOMBRE, PRECIO, STOCK, CATEGORIA, ID_PEDIDO, ID_CLIENTE)
	VALUES('10102', 'SUDADERA',9.99,30,'INVIERNO', '00000000JSKL586DG6E92','0015356788');
INSERT INTO PRODUCTO (ID_PRODUCTO, NOMBRE, PRECIO, STOCK, CATEGORIA, ID_PEDIDO, ID_CLIENTE)
	VALUES('10101', 'CAMISA',19.99,30,'PIMAVERA', '00000000JSKL586DG6E91','0015356787');

-- TABLA ENVIO
INSERT INTO ENVIO (ID_ENVIO, DIRECCION, CIUDAD, CODIGO_POSTAL, FECHA_ENVIO, FECHA_ENTREGA, ID_PEDIDO)
	VALUES('5550','C/LOS PLINTOS, BRENES','SEVILLA',41310,TO_DATE('15/02/2020','DD/MM/YYYY'),TO_DATE('17/02/2020','DD/MM/YYYY'), '00000000JSKL586DG6E93');
INSERT INTO ENVIO (ID_ENVIO, DIRECCION, CIUDAD, CODIGO_POSTAL, FECHA_ENVIO, FECHA_ENTREGA, ID_PEDIDO)
	VALUES('5559','CONJUNTO JUMILLA, LORA DEL RIO','SEVILLA',41440,TO_DATE('15/01/2026','DD/MM/YYYY'),TO_DATE('25/01/2026','DD/MM/YYYY'), '00000000JSKL586DG6E92');
INSERT INTO ENVIO (ID_ENVIO, DIRECCION, CIUDAD, CODIGO_POSTAL, FECHA_ENVIO, FECHA_ENTREGA, ID_PEDIDO)
	VALUES('5558','C/LA PRIORA, LORA DEL RIO','SEVILLA',41440,TO_DATE('21/02/2024','DD/MM/YYYY'),NULL, '00000000JSKL586DG6E91');

-- TABLA PAGOS
INSERT INTO PAGOS (ID_PAGO, FECHA_PAGO, IMPORTE_PAGO, METODO_PAGO, ID_ENVIO)
	VALUES('1077',TO_DATE('14/02/2020','DD/MM/YYYY'),13.98,'BIZUM','5550');
INSERT INTO PAGOS (ID_PAGO, FECHA_PAGO, IMPORTE_PAGO, METODO_PAGO, ID_ENVIO)
	VALUES('1076',TO_DATE('15/01/2026','DD/MM/YYYY'),18.98,'PAYPAL','5559');
INSERT INTO PAGOS (ID_PAGO, FECHA_PAGO, IMPORTE_PAGO, METODO_PAGO, ID_ENVIO)
	VALUES('1075',TO_DATE('20/02/2024','DD/MM/YYYY'),24.98,'TRANSFERENCIA','5558');

UPDATE PEDIDO SET ESTADO = 'ENVIADO' WHERE ESTADO = 'EN TRÁNSITO';

-- Insert y restricciones mysql

ALTER TABLE PEDIDO ADD CONSTRAINT FK_PEDIDO FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTES (ID_CLIENTE) ON DELETE CASCADE;


ALTER TABLE PEDIDO ADD CONSTRAINT CHK_PEDIDO_ESTADO CHECK (ESTADO IN ('PENDIENTE','PAGADO','ENVIADO','ENTREGADO','CANCELADO'));

ALTER TABLE PRODUCTO ADD CONSTRAINT CHK1_PRODUCTO CHECK (PRECIO > 0);

ALTER TABLE ENVIO ADD CONSTRAINT CHK1_ENVIO CHECK (CODIGO_POSTAL BETWEEN 10000 AND 99999);

ALTER TABLE PRODUCTO ADD CONSTRAINT UNIQUE_PRODUCTO UNIQUE (NOMBRE);

INSERT INTO CLIENTES VALUES('0015356789', 'RODOLFO', 'GÓMEZ CAZÓN', 'ROGOCA@OUTLOOK.COM',659321099,'2020-01-13');
INSERT INTO CLIENTES VALUES('0015356788', 'ALVARO', 'CRUCES MARTINEZ', 'ALVAROCM@OUTLOOK.COM',622693538,'2022-11-03');
INSERT INTO CLIENTES VALUES('0015356787', 'LUCIA', 'FERNANDEZ ROMAN', 'LUCIAFR@OUTLOOK.COM',623392837,'2024-01-01');
INSERT INTO PEDIDO VALUES ('00000000JSKL586DG6E93','2020-02-14', 'PENDIENTE', 6.99,2,'0015356789');
INSERT INTO PEDIDO VALUES ('00000000JSKL586DG6E92','2023-02-04', 'PENDIENTE', 9.99,7,'0015356788');
INSERT INTO PEDIDO VALUES ('00000000JSKL586DG6E91','2024-02-20', 'PENDIENTE', 19.99,1,'0015356787');

INSERT INTO PRODUCTO VALUES('10103', 'CAMISETA',6.99,30,'INVIERNO', '00000000JSKL586DG6E93','0015356789');
INSERT INTO PRODUCTO VALUES('10102', 'SUDADERA',9.99,30,'INVIERNO', '00000000JSKL586DG6E92','0015356788');
INSERT INTO PRODUCTO VALUES('10101', 'CAMISA',19.99,30,'PRIMAVERA', '00000000JSKL586DG6E91','0015356787');

INSERT INTO ENVIO VALUES('5550','C/LOS PLINTOS, BRENES','SEVILLA',41310,'2020-02-15','2020-02-17','00000000JSKL586DG6E93');
INSERT INTO ENVIO VALUES('5559','CONJUNTO JUMILLA, LORA DEL RIO','SEVILLA',41440,'2023-02-05','2023-02-07','00000000JSKL586DG6E92');
INSERT INTO ENVIO VALUES('5558','C/LA PRIORA, LORA DEL RIO','SEVILLA',41440,'2024-02-21','2024-02-22','00000000JSKL586DG6E91');

INSERT INTO PAGOS VALUES('1077','2020-02-14',13.98,'BIZUM','5550');
INSERT INTO PAGOS VALUES('1076','2023-02-04',18.98,'BIZUM','5559');
INSERT INTO PAGOS VALUES('1075','2024-02-20',24.98,'BIZUM','5558');

SELECT * FROM CLIENTES;
SELECT * FROM PEDIDO;
SELECT * FROM PRODUCTO;
SELECT * FROM ENVIO;
SELECT * FROM PAGOS;
