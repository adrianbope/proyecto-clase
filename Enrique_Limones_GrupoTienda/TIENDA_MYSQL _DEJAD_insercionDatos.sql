

CREATE TABLE CLIENTES(
    ID_CLIENTE VARCHAR(10) NOT NULL,
    NOMBRE VARCHAR(25),
    APELLIDOS VARCHAR(25),
    CORREO VARCHAR(30),
    TELEFONO INT(10),
    FECHA_REGISTRO DATE,
    CONSTRAINT PK_CLIENTES PRIMARY KEY (ID_CLIENTE)
);

CREATE TABLE PEDIDO(
    ID_PEDIDO VARCHAR(30) NOT NULL,
    FECHA_REALIZACION DATE,
    ESTADO VARCHAR(25),
    PRECIO_UNITARIO INT(10,2),
    CANTIDAD_SOLICITADA INT(10),
    ID_CLIENTE VARCHAR(10),
    CONSTRAINT PK_PEDIDO PRIMARY KEY (ID_PEDIDO),
    CONSTRAINT FK_PEDIDO FOREIGN KEY(ID_CLIENTE) REFERENCES CLIENTES (ID_CLIENTE)
);
CREATE TABLE PRODUCTO(
    ID_PRODUCTO INT(10) NOT NULL,
    NOMBRE VARCHAR(25),
    PRECIO INT(10,2),
    STOCK INT(10),
    CATEGORIA VARCHAR(10),
    ID_PEDIDO VARCHAR(30) NOT NULL,
    ID_CLIENTE VARCHAR(10) NOT NULL,
    CONSTRAINT PK_PRODUCTO PRIMARY KEY (ID_PRODUCTO),
    CONSTRAINT FK1_PRODUCTO FOREIGN KEY(ID_PEDIDO) REFERENCES PEDIDO (ID_PEDIDO),
    CONSTRAINT FK2_PRODUCTO FOREIGN KEY(ID_CLIENTE) REFERENCES CLIENTES (ID_CLIENTE)
);

CREATE TABLE ENVIO(
    ID_ENVIO VARCHAR(30) NOT NULL,
    DIRECCION VARCHAR(100),
    CIUDAD VARCHAR(25),
    CODIGO_POSTAL INT (10),
    FECHA_ENVIO DATE,
    FECHA_ENTREGA DATE,
    ID_PEDIDO VARCHAR(30) NOT NULL,
    CONSTRAINT PK_ENVIO PRIMARY KEY (ID_ENVIO),
    CONSTRAINT FK_ENVIO FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDO (ID_PEDIDO)
);

CREATE TABLE PAGOS(
    ID_PAGO VARCHAR(10) NOT NULL,
    FECHA_PAGO DATE,
    IMPORTE_PAGO INT(10,2),
    METODO_PAGO VARCHAR(25),
    ID_ENVIO VARCHAR(30) NOT NULL,
    CONSTRAINT PK_PAGOS PRIMARY KEY (ID_PAGO),
    CONSTRAINT FK_PAGOS FOREIGN KEY (ID_ENVIO) REFERENCES ENVIO (ID_ENVIO)
);

INSERT INTO CLIENTES VALUES('0015356789', 'RODOLFO', 'GÓMEZ CAZÓN', 'ROGOCA@OUTLOOK.COM',659321099,'2020-01-13');
INSERT INTO CLIENTES VALUES('0015356788', 'ALVARO', 'CRUCES MARTINEZ', 'ALVAROCM@OUTLOOK.COM',622693538,'2022-11-03');
INSERT INTO CLIENTES VALUES('0015356787', 'LUCIA', 'FERNANDEZ ROMAN', 'LUCIAFR@OUTLOOK.COM',623392837,'2024-01-01');
INSERT INTO PEDIDO VALUES ('00000000JSKL586DG6E93','2020-02-14', 'PENDIENTE DE ENVÍO', 6.99,2,'0015356789');
INSERT INTO PEDIDO VALUES ('00000000JSKL586DG6E92','2023-02-04', 'PENDIENTE DE ENVÍO', 9.99,7,'0015356788');
INSERT INTO PEDIDO VALUES ('00000000JSKL586DG6E91','2024-02-20', 'PENDIENTE DE ENVÍO', 19.99,1,'0015356787');

INSERT INTO PRODUCTO VALUES('10103', 'CAMISETA',6.99,30,'INVIERNO', '00000000JSKL586DG6E93','0015356789');
INSERT INTO PRODUCTO VALUES('10102', 'SUDADERA',9.99,30,'INVIERNO', '00000000JSKL586DG6E92','0015356788');
INSERT INTO PRODUCTO VALUES('10101', 'CAMISA',19.99,30,'PRIMAVERA', '00000000JSKL586DG6E91','0015356787');

INSERT INTO ENVIO VALUES('5550','C/LOS PLINTOS, BRENES','SEVILLA',41310,'2020-02-15','2020-02-17','00000000JSKL586DG6E93');
INSERT INTO ENVIO VALUES('5559','CONJUNTO JUMILLA, LORA DEL RIO','SEVILLA',41440,'2023-02-05','2023-02-07','00000000JSKL586DG6E92');
INSERT INTO ENVIO VALUES('5558','C/LA PRIORA, LORA DEL RIO','SEVILLA',41440,'2024-02-21','2024-02-22','00000000JSKL586DG6E91');

INSERT INTO PAGOS VALUES('1077','2020-02-14',13.98,'BIZUM','5550');
INSERT INTO PAGOS VALUES('1076','2023-02-04',18.98,'BIZUM','5559');
INSERT INTO PAGOS VALUES('1075','2024-02-20',24.98,'BIZUM','5558');

SELECT * FROM CLIENTES;
SELECT * FROM PEDIDO;
SELECT * FROM PRODUCTO;
SELECT * FROM ENVIO;
SELECT * FROM PAGOS;

/* 
 * RESTRICCIONES PARA FUTURAS AMPLIACIONES DEL PROYECTO:
 *	1. RESTRICCIONES DE INTEGRIDAD REFERENCIAL (FK):
 *  	- Añadir 'ON DELETE CASCADE' en la tabla PEDIDO para que, al eliminar un cliente, 
 *    	se borren sus pedidos automáticamente y no queden registros huérfanos.
 *
 *	2. RESTRICCIONES DE VALIDACIÓN (CHECK):
 *  	- En la tabla PRODUCTO, asegurar que el PRECIO sea siempre > 0.
 * 		- En la tabla ENVIO, validar que el CODIGO_POSTAL sea un número de exactamente 5 dígitos.
 *
 *	3. RESTRICCIONES DE UNICIDAD (UNIQUE):
 *  	- Garantizar que el NOMBRE del PRODUCTO sea único para evitar confusiones en el inventario.
 *
 *	4. RESTRICCIONES DE ESTADO:
 *  	- Limitar los valores de la columna ESTADO en la tabla PEDIDO a: 
 *    	('PENDIENTE', 'PAGADO', 'ENVIADO', 'ENTREGADO', 'CANCELADO').
*/
